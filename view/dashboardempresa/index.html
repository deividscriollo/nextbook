<div ng-controller="appsCtrl as ctrl">
    <md-sidenav layout="column" class="md-sidenav-right-100" md-component-id="left" md-is-locked-open="$mdMedia('gt-md')" style="    position: fixed;
    left: 80%;
    top: 64px;
    width: 20%;
    height: 100%;
    z-index: 9;">
        <div layout="column" flex layout-padding>
            <md-content class="md-padding">
                <md-tabs md-dynamic-height="true">
                    <md-tab>
                        <md-tab-label>
                            <md-icon md-svg-icon="img/icons/ic_comment_24px.svg"></md-icon>
                        </md-tab-label>
                        <md-tab-body>
                            <md-subheader class="md-primary">Mensajes</md-subheader>
                            <md-divider></md-divider>
                            <md-content class="md-padding">
                                <md-tabs md-dynamic-height="true" md-selected="ctrl.selectedTab" id="chat_mensajes">
                                    <md-tab>
                                        <md-tab-body>
                                            <md-list-item class="noright" ng-repeat="chat in chats">
                                                <md-button ng-click="ctrl.open_chat(chat)" style="width: 100%;">
                                                    <div ng-class="{'no-view': chat.estado_view == false }">
                                                        <img alt="Img" ng-src="{{chat.img}}" class="md-avatar" style=" float: left;" />
                                                        <div style="font-size: 11.5px; margin-top: 0px; margin-bottom: 0; height: 16px; width: 0;">{{chat.para}}</div>
                                                        <div style="font-size: 9.5px; margin-top: 0px; margin-bottom: 0; float: left;">{{chat.mensaje}}</div>
                                                    </div>
                                                </md-button>
                                            </md-list-item>

                                        </md-tab-body>
                                    </md-tab>
                                    <md-tab>
                                        <md-tab-body>
                                            <md-button class="md-icon-button md-primary" ng-click="ctrl.back_chat()">
                                                <md-icon md-svg-icon="img/icons/ic_arrow_back_24px.svg"></md-icon>
                                            </md-button>
                                            <!-- <div style=" float: right; margin-top: 10px;"></div> -->
                                            {{nombre_chat}}
                                            <md-divider></md-divider>
                                            <br>
                                            <div class="chat-container">
                                                <div class="wrapper-mensajes" ng-repeat="mensaje_recibido in mensajes_recibidos" ng-show="size_recibidos!=0">
                                                    <img alt="Img" height="35" width="35" ng-src="{{img_chat}}" style=" border-radius: 50%;" style=" float: left;" />
                                                    <ul class="chat-wapper-izq">
                                                        <li class="globo-izq">
                                                            <texto-mensaje>{{mensaje_recibido.mensaje}}</texto-mensaje>
                                                        </li>
                                                        <!--<li class="globo-izq">
                                                           <texto-mensaje >This is a bit longer texto-mensaje</texto-mensaje>
                                                        </li>-->
                                                    </ul>
                                                </div>

                                                <div class="wrapper-mensajes" ng-repeat="mensajes_enviado in mensajes_enviados" ng-show="size_enviados!=0">
                                                    <img alt="Img" height="35" width="35" ng-src="{{img_session}}" style="border-radius: 50%; float: right;" style=" float: left;" />
                                                    <ul class="chat-wapper-drch">
                                                        <li class="globo-drch">
                                                            <texto-mensaje>{{mensajes_enviado.mensaje}}</texto-mensaje>
                                                        </li>
                                                    </ul>
                                                </div>

                                            </div>

                                            <md-input-container class="md-block" style="margin-bottom:0;">
                                                <textarea rows="2" class="md-mini md-primary" placeholder="Escribe un mensaje"></textarea>
                                            </md-input-container>
                                        </md-tab-body>
                                    </md-tab>
                                </md-tabs>
                            </md-content>
                        </md-tab-body>
                    </md-tab>
                    <md-tab>
                        <md-tab-label>
                            <md-icon md-svg-icon="img/icons/ic_insert_drive_file_24px.svg"></md-icon>
                            <md-badge ng-show="nrfacturas!=0">{{nrfacturas}}</md-badge>
                        </md-tab-label>
                        <md-tab-body>
                            <md-subheader class="md-primary">Mis Facturas</md-subheader>
                            <md-divider></md-divider>
                            <md-list-item class="noright" ng-repeat="factura in facturas">
                                <md-button ng-click="generar_pdf(factura)">
                                    <div ng-class="{'no-view': factura.estado_view == false }">
                                        <div style="font-size: 11.5px; margin-top: 0px; margin-bottom: 0; height: 16px;">{{factura.clave_acceso}}</div>
                                        <div style="font-size: 9.5px; margin-top: 0px; margin-bottom: 0; float: left;">{{factura.nombre_comercial}}</div>
                                    </div>
                                </md-button>
                            </md-list-item>
                        </md-tab-body>
                    </md-tab>
                    <md-tab>
                        <md-tab-label>
                            <md-icon md-svg-icon="img/icons/addShoppingCart.svg"></md-icon>
                            <md-badge ng-show="nrfacturas!=0">{{nrfacturas}}</md-badge>
                        </md-tab-label>
                        <md-tab-body>
                            <md-subheader class="md-primary">Tienda</md-subheader>
                            <md-divider></md-divider>
                            <md-list-item class="noright">
                                Tienda
                            </md-list-item>
                        </md-tab-body>
                    </md-tab>
                    <md-tab>
                        <md-tab-label>
                            <md-icon md-svg-icon="img/icons/car-compact.svg"></md-icon>
                            <md-badge ng-show="nrfacturas!=0">{{nrfacturas}}</md-badge>
                        </md-tab-label>
                        <md-tab-body>
                            <md-subheader class="md-primary">Autos</md-subheader>
                            <md-divider></md-divider>
                            <md-list-item class="noright">
                                Autos
                            </md-list-item>
                        </md-tab-body>
                    </md-tab>
                </md-tabs>
            </md-content>
        </div>
    </md-sidenav>

    <!-- <table style="
    position: absolute;
    /*left: 69%;*/
    bottom: 5px;
    z-index: 9;
    width: 260px;" >
   <tr>
  <td ng-repeat="chats_box in chat_boxs" style=" 
    /*border: solid 1px #afafaf;*/
    border-radius: 5px;
    width: 200px">
  <div style="
    cursor:pointer;
    background-color: #3f51b5;
    width: 260px;
    height: 19px;
    padding: 7px;
    border-radius: 5px 5px 0 0;
    color: white;">
    <span style="font-size:12px;">Alex Guaman</span>
  </div>
  <md-content>
  <div style="
    cursor: pointer;
    background-color: #ccc;
    width: 260px;
    height: 113px;
    padding: 7px;
    border-radius: 5px 5px 0 0;
    color: white;">
      <span style="font-size:12px;">Alex Guaman</span>
  </div>
  <md-input-container class="md-block" style="margin-bottom:0;">
  <textarea rows="2" class="md-mini md-primary" placeholder="Escribe un mensaje"></textarea>
  </md-input-container>
  </md-content>
      </td>
   </tr>
</table> -->

    <!-- <div style="
    cursor:pointer;
    position: absolute;
    left: 69%;
    bottom: 0;" >
    <div style="background-color: #3f51b5;
    width: 93%;
    height: 19px;
    padding: 7px;
    border-radius: 5px 5px 0 0;
    color: white;">
      <span style="font-size:12px;">Alex Guaman</span>
    </div>
  <md-content >
  <md-input-container class="md-block">
          <label>Escribe un mensaje</label>
          <textarea ng-model="user.biography" md-maxlength="150" rows="5" md-select-on-focus></textarea>
        </md-input-container>
  </md-content>
</div> -->

    <md-button class="md-fab md-fab-bottom-right" aria-label="Add" ng-click="showAdd($event)">
        <ng-md-icon icon="add"></ng-md-icon>
    </md-button>

    <md-toolbar ng-show="!showSearch">
        <div class="md-toolbar-tools toolbar-center">
            <md-button ng-click="toggleSidenav('left')" hide-gt-md aria-label="Menu" class="md-icon-button launch">
                <ng-md-icon icon="menu"></ng-md-icon>
            </md-button>
            <h3>
              Nextbook, Red de Negocios&nbsp;&nbsp;
          </h3>
            <form ng-submit="$event.preventDefault()" class="input-buscador">
                <md-autocomplete ng-disabled="isDisabled" md-no-cache="noCache" md-selected-item="selectedItem" md-search-text-change="searchTextChange(searchText)" md-search-text="searchText" md-selected-item-change="selectedItemChange(item)" md-items="item in items" md-item-text="item.nombre_comercial" md-min-length="0" placeholder="Empresas,Servicios ....." md-menu-class="autocomplete-custom-template">
                    <md-item-template>
                        <span class="item-title">
                  <img alt="Img" ng-src="{{item.img}}" class="avatar-busqueda" />
                  <span style="font-size:10px"> 
                  {{item.nombre_comercial}}
                  <md-icon md-svg-icon="img/icons/ic_comment_24px.svg" class="mensaje-autocomplete" ng-click="sendMensaje(item)"></md-icon>
                  </span>
                        </span>
                    </md-item-template>
                </md-autocomplete>
            </form>
            <span flex></span>

            <md-button href="#/My-space/Perfil-inicio">
                Perfil
            </md-button>
            <md-button href="#/My-space/Inicio">
                Inicio
            </md-button>
            <md-menu md-position-mode="target-right target">
                <md-button aria-label="Open demo menu" class="md-icon-button" ng-click="$mdOpenMenu($event)">
                    <ng-md-icon icon="more_vert"></ng-md-icon>
                </md-button>
                <md-menu-content width="4">
                    <md-menu-item>
                        <md-button ng-href="#/salir/341234">
                            <div layout="row" flex>
                                <p flex>Cerrar Sesi√≥n</p>
                                <ng-md-icon icon="exit_to_app"></ng-md-icon>
                            </div>
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </div>

        <!-- <div class="toolbar-chat">
          <md-menu-bar>
            <md-menu md-position-mode="target-right target">
              <button ng-click="$mdOpenMenu()" style="background:rgb(63, 81, 181);">
                <md-icon md-svg-icon="img/icons/ic_comment_24px.svg"></md-icon>
              </button>
              <md-menu-content >
              <md-subheader class="md-primary">Mensajes</md-subheader>
               <md-divider ></md-divider>
               <md-list-item ng-click="goToPerson(person.name, $event)" class="noright" >
                  <img alt="Img" ng-src="images/samples/w1.jpg" class="md-avatar" />
                  <p>Empresa A</p>
              </md-list-item>
               <md-list-item ng-click="goToPerson(person.name, $event)" class="noright" >
                  <img alt="Img" ng-src="images/samples/w1.jpg" class="md-avatar" />
                  <p>Empresa B</p>
              </md-list-item>
              </md-menu-content>
            </md-menu>

            <md-menu md-position-mode="target-right target">
              <button ng-click="$mdOpenMenu()" style="background:rgb(63, 81, 181);">
                <md-icon md-svg-icon="img/icons/ic_insert_drive_file_24px.svg"></md-icon>
                <md-badge ng-show="nrfacturas!=0">{{nrfacturas}}</md-badge>
              </button>
              <md-menu-content >
              <md-subheader class="md-primary">Mis Facturas</md-subheader>
               <md-divider ></md-divider>
               <md-list-item  class="noright" >
                <ul style="list-style:none;padding-left: 8px;">
                 <li ng-repeat="factura in facturas">
                    <md-button ng-click="generar_pdf(factura)" >
                    <div ng-class="{'no-view': factura.estado_view == false }">
                      <div style="font-size: 12px; margin-top: 0px; margin-bottom: 0; height: 16px;">{{factura.clave_acceso}}</div>
                      <div style="font-size: 10px; margin-top: 0px; margin-bottom: 0; float: left;">{{factura.nombre_comercial}}</div>
                    </div>
                    </md-button>
                 </li> 
              </ul> 
              </md-list-item>

              </md-menu-content>
            </md-menu>
          </md-menu-bar>  
      </div> -->

    </md-toolbar>
</div>
<div app-view-segment="1"></div>

<style type="text/css">
    .toolbar-center {
        padding-left: 16%;
        padding-right: 20%;
    }
    
    .toolbar-chat {
        padding-left: 80%;
        margin-top: -50px;
    }
    
    .no-view {
        font-weight: bold;
    }
    
    .avatar-busqueda {
        margin-top: 8px;
        margin-bottom: 8px;
        margin-right: 16px;
        border-radius: 50%;
        box-sizing: content-box;
        width: 40px;
    }
    
    .mensaje-autocomplete:hover {
        color: #ff4081;
    }
    
    md-badge {
        margin: 0 0 0px -4px;
        background-color: #ff4081;
        color: white;
        padding: 1px 4px;
        border-radius: 4px;
    }
    
    #chat_mensajes md-tabs-canvas {
        display: none;
    }
</style>